# SelenideMultiTenantDemo## Selenium Tests in Multiple Environments with Selenide FrameworkThis example demonstrates how to run Selenium tests in multiple environments using Selenide framework.**Selenide** ([http://selenide.org/](http://selenide.org/)) )  is a framework for writing easy-to-read and easy-to-maintain automated tests in Java. It defines concise fluent API, natural language assertions and does some magic for ajax-bases applications to let you focus entirely on the business logic of your tests. #### Multiple URLsWe need access to the system under test from local (tester’s) computer and remote (Selenium Grid) computerWe need to have access to different test servers (test URLs), e.g. development test server, pre-production test server etc. #### Multiple tenantsWe want to use different configurations for different tenants (users).We can use property files to access different test URLs. We can specify different property files for different URLs and tenants```testUrl= http://localhost:8080 loginName=admin@secondpassword=admintenant=second```#### Login before testSome tests do not require login. Other tests require to be logged in. If a test requires login before every test method, we can write that this test class implements LoginBeforeMethod interface. We check it in the BaseTest class and perform login if necessary.``` javapublic interface LoginBeforeClasspublic interface LoginBeforeMethodpublic class FirstTenantTest extends BaseTest implements LoginBeforeMethod{In BaseTest:@BeforeMethodpublic void loginToApplication() {  if(this instanceof LoginBeforeMethod ) {    loginToTestUrl();  }}```#### Framework filesWe need only 5 additional classes to implement described features using Selenide. With this framework, we can run tests in parallel using required configuration. We save screenshots for failed tests. We use Page Object pattern.<img src='/src/main/resources/FrameworkClasses.png'>### How to specify the environment property file?We can specify the environment file with properties in several places#### 1. Surefire plugin in pom```xml<plugin>	<groupId>org.apache.maven.plugins</groupId>	<artifactId>maven-surefire-plugin</artifactId>	<version>2.19.1</version>	<configuration>		<suiteXmlFiles>			<suiteXmlFile>src/test/resources/${tests}.xml</suiteXmlFile>		</suiteXmlFiles>		<argLine>-Denvironment.file.name=mt_first</argLine>	</configuration></plugin>```#### 2. Maven command line> *mvn clean test -Dtests=multiEnvTest -Denvironment.file.name=mt_first*#### 3. Test class```javapublic class FirstTenantTest extends MtBaseTest implements LoginBeforeMethod{	   {	   testPropertyFile = "mt_first";	   }```#### 4. TestNG configuration file```xml<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd"><suite name="Simple Selenide tests" verbose="8"  parallel="classes" thread-count="3">	<test name="First tenant">	<parameter name="testPropertyFile"  value="mt_first"/>		<classes>			<class name="sampleMtTests.DoNothingTest" />			<class name="sampleMtTests.LoginLogoutTest" />			<class name="sampleMtTests.WrongLoginTest" />			<class name="sampleMtTests.DoNothingWithLoginTest" />			<class name="sampleMtTests.CommonPartTest" />			<class name="sampleMtTests.FirstTenantTest" />		</classes>```---## Run tests on Continuous Integration serverTo specify the testing configuration file and properties, we can use Maven command line. It is a convenient way to run Selenium tests on a Continuous Integration server>  **mvn clean test -Dtests=mtManyTests -Dtest.env=mt_first**As a result, we will test the site [Multi environment demo](/src/test/resources/demo/multiEnv.html) running [mtFirstTestNG.xml](/src/test/resources/mtManyTests.xml "TestNG configuration") using properties from the file [mt_first.properties](/src/test/resources/env/mt_first.properties). If we run this command> **mvn clean test -Dtests=tiTestNG**we will test the site  [The internet](http://the-internet.herokuapp.com/) running [tiTestNG.xml](/src/test/resources/tiTestNG.xml "TestNG configuration") using properties from the file [ti.properties](/src/test/resources/env/ti.properties), because this property file is defined as parameter in the tiTestNG.xml.